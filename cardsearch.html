<!DOCTYPE html>
<html>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- CSV to JSON -->
	<script src="https://cdn.rawgit.com/Keyang/node-csvtojson/d41f44aa/browser/csvtojson.min.js"></script>

<body>
	<!-- <div class="row">
		<h2 style="text-align: center">Werekin</h2>

		<div class="col s12">
			<img src="https://drive.google.com/uc?export=view&id=1NnWcHmLSkIxPlbWnINAouNFPuFLJUkpc" alt="Werekin" style="width: 50%; border-radius: 15px; display: block; margin-left: auto; margin-right: auto">
		</div>

		<div class="col s12" style="text-align: center;">
			<h4 style="color: red;">Gender</h4>
			<br>
			<h5 id="gender" class="">Genderless</h5>
			<br>
		</div>
		<div class="col s7"></div>

		<div class="col s12">
			<div class="col s4" style="text-align: center;">
				<button class="waves-effect waves-light btn blue" style=" width: 50%; text-align: center" onclick="gendermale(this)" type="button">Male</button>
			</div>
			<div class="col s4" style="text-align: center;">
				<button class="waves-effect waves-light btn blue" style=" width: 50%; text-align: center" onclick="genderfemale(this)" type="button">Female</button>
			</div>
			<div class="col s4" style="text-align: center;">
				<button class="waves-effect waves-light btn blue" style=" width: 50%; text-align: center" onclick="gendergenderless(this)" type="button">Genderless</button>
			</div>
		</div>

	</div> -->

    <div class="search-wrap">
        <label for="search">Search Card</label>
        <input type="search" id="search" data-search>
    </div>
    <div class="card-container" data-cards-container>

    </div>
    <template id="cards-temp" data-template>
        <div class="cards">
            <div class="header" data-header>1</div>
            <div class="body" data-body>2</div>
        </div>
    </template>

    <script type="text/javascript">
        let abilities = [];
        let cardlist = [];

        // google sheets
		let url_race_a_w = "https://docs.google.com/spreadsheets/d/1aTyNDibWsFQvNRUaCXVcXgTkYJrT_F7GALz9GSKEXGU/export?format=csv";


        const cardTemplate = document.querySelector("[data-template]");
        const cardContainer = document.querySelector("[data-cards-container]");
        const searchInput = document.querySelector("[data-search]");

        searchInput.addEventListener("input", (e) => {
            const value = e.target.value.toLowerCase();
            // console.log(cardlist);
            cardlist.forEach(card => {
                const isVisible = card.name.toLowerCase().includes(value) ||
                    card.effect.toLowerCase().includes(value);
                card.element.classList.toggle("hide", !isVisible);
            })
        })

		// Fetch Abilities and set into Array
		fetch(url_race_a_w).then(result=>result.text()).then(function(csvtext) {
			return csv().fromString(csvtext);
		}).then(function(csv) {
			cardlist = csv.map(function(row) {
				// if ((row.weakness) != "x") {
					// if (row.name != "Transform") {
						// abilities.push(row);
                        const card = cardTemplate.content.cloneNode(true).children[0];
                        const header = card.querySelector("[data-header]");
                        const body = card.querySelector("[data-body]");
                        header.textContent = row.name;
                        body.textContent = row.effect;
                        cardContainer.append(card);
                        return{name: row.name, effect: row.effect, element: card}
                    // }
				// }
			})
		});


    </script>
</body>
</html>
